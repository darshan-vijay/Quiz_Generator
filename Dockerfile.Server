# Dockerfile-server
FROM node:18

WORKDIR /app

ARG DATABASE_URL
ARG CORS_ORIGIN
ARG GOOGLE_CLIENT_ID

ENV DATABASE_URL=$DATABASE_URL
ENV CORS_ORIGIN=$CORS_ORIGIN
ENV GOOGLE_CLIENT_ID=$GOOGLE_CLIENT_ID

COPY package*.json ./
RUN npm install

COPY . .

RUN npm run build

EXPOSE 3001

CMD ["node", "build/src/app.js"]